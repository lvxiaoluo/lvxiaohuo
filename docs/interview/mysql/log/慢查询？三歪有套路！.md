## 慢查询？三歪有套路！

- [【对线面试官】Java注解](https://mp.weixin.qq.com/s?__biz=MzU4NzA3MTc5Mg==&mid=2247483821&idx=1&sn=e9003410a8d3c8a092de0c4d2002bedd&scene=21#wechat_redirect)
- [【对线面试官】Java泛型](https://mp.weixin.qq.com/s?__biz=MzU4NzA3MTc5Mg==&mid=2247483823&idx=1&sn=cc887dc2c7e68a69e8d4d141c2ca9b5e&scene=21#wechat_redirect)
- [【对线面试官】 Java NIO](https://mp.weixin.qq.com/s?__biz=MzU4NzA3MTc5Mg==&mid=2247483854&idx=1&sn=aa450a03ac0d6e8cf12cf13d4719ede3&scene=21#wechat_redirect)
- [【对线面试官】Java反射 && 动态代理](https://mp.weixin.qq.com/s?__biz=MzU4NzA3MTc5Mg==&mid=2247483893&idx=1&sn=af51e626f2c2baec8cae4f4a15425957&scene=21#wechat_redirect)
- [【对线面试官】多线程基础](https://mp.weixin.qq.com/s?__biz=MzU4NzA3MTc5Mg==&mid=2247483918&idx=1&sn=ab8550bb284edcf7cf0c6d0b41e0c2f6&scene=21#wechat_redirect)
- [【对线面试官】 CAS](https://mp.weixin.qq.com/s?__biz=MzU4NzA3MTc5Mg==&mid=2247483977&idx=1&sn=1a3aa3aec27073aa3b422bc41d7fbe2d&chksm=fdf0ea16ca8763005aff64834eeb7bef08bf4ee2d8febb7e8d4d8e5d1542336e13fac71e2881&scene=21&cur_album_id=1657204970858872832#wechat_redirect)
- [【对线面试官】synchronized](https://mp.weixin.qq.com/s?__biz=MzU4NzA3MTc5Mg==&mid=2247483980&idx=1&sn=c9b620834adb889ad8ccedb6afdcaed1&scene=21#wechat_redirect)
- [【对线面试官】AQS&&ReentrantLock](https://mp.weixin.qq.com/s?__biz=MzU4NzA3MTc5Mg==&mid=2247484035&idx=1&sn=ccaec352e192f1fd40020d9a984e9461&chksm=fdf0eadcca8763ca5c44bd19118fd00e843c163deb40cda444b3fc08430c57760db15eca1ea6&scene=21&cur_album_id=1657204970858872832#wechat_redirect)
- [【对线面试官】线程池](https://mp.weixin.qq.com/s?__biz=MzU4NzA3MTc5Mg==&mid=2247484036&idx=1&sn=75e9e93a82a811e9c71b8127cf7ac677&chksm=fdf0eadbca8763cd7ab74757f9472d061c0244d2373a1ea85b1cbc833941441fdb1e91ead5b4&scene=21&cur_album_id=1657204970858872832#wechat_redirect)
- [【对线面试官】ThreadLocal](https://mp.weixin.qq.com/s?__biz=MzU4NzA3MTc5Mg==&mid=2247484118&idx=1&sn=9526a1dc0d42926dd9bcccfc55e6abc2&scene=21#wechat_redirect)
- [【对线面试官】CountDownLatch和CyclicBarrier](https://mp.weixin.qq.com/s?__biz=MzU4NzA3MTc5Mg==&mid=2247484363&idx=1&sn=743dcdfb84f83cfc38882407f87c7c6d&chksm=fdf0eb94ca87628296d86d16769f25e10acd052bcd78f4a4608f4218e4948aff610b04a41f60&token=960279204&lang=zh_CN&scene=21#wechat_redirect)
- [【对线面试官】List](https://mp.weixin.qq.com/s?__biz=MzU4NzA3MTc5Mg==&mid=2247484253&idx=1&sn=532db3941f47502582295cbb003f753d&chksm=fdf0eb02ca8762145c66b33bbb429399f1f0f27b31c22f7cf6c693c235e9a7cffdafb6ce2fdc&token=57394744&lang=zh_CN&scene=21#wechat_redirect)
- [【对线面试官】Map](https://mp.weixin.qq.com/s?__biz=MzU4NzA3MTc5Mg==&mid=2247484280&idx=1&sn=87cfede653dabc26c909823a1dafd615&chksm=fdf0eb27ca876231095ff99f0b3e30acd7b2ee4cdc7ddb16da0bb6a3b02f531e27324059cf58&token=100834666&lang=zh_CN&scene=21#wechat_redirect)
- [【对线面试官】SpringMVC](https://mp.weixin.qq.com/s?__biz=MzU4NzA3MTc5Mg==&mid=2247484064&idx=1&sn=3a59514a8262ab61036fc89cf0b0a27e&chksm=fdf0eaffca8763e90002ce1daf365f717a4bda3e50878f65943f52d14bee78fc65e837ef32f9&token=664255414&lang=zh_CN&scene=21#wechat_redirect)
- [【对线面试官】Spring基础](https://mp.weixin.qq.com/s?__biz=MzU4NzA3MTc5Mg==&mid=2247484147&idx=1&sn=ef282cd54351436fc33c47534b4c2ac1&chksm=fdf0eaacca8763ba9b6c69acdba6b0ae8801405c98295842a0b5d891fe80246d76a2a0470bea&token=1998524575&lang=zh_CN&scene=21#wechat_redirect)
- [【对线面试官】SpringBean生命周期](https://mp.weixin.qq.com/s?__biz=MzU4NzA3MTc5Mg==&mid=2247484187&idx=1&sn=8f831c40dca9b2a57fdfbd051e4eab44&chksm=fdf0eb44ca87625253ea831471110860d3f27e04488b2748ba90ad442b079aca3d6b95d31bbe&token=1998524575&lang=zh_CN&scene=21#wechat_redirect)
- [【对线面试官】Redis基础](https://mp.weixin.qq.com/s?__biz=MzU4NzA3MTc5Mg==&mid=2247484227&idx=1&sn=4a124a2dd5ef6ce062abdadf247b5cff&chksm=fdf0eb1cca87620a8679473dfdd50421eb6ccba2459a7cb59ae1652138f7bb508558f3d4649e&token=57394744&lang=zh_CN&scene=21#wechat_redirect)
- [【对线面试官】Redis持久化](https://mp.weixin.qq.com/s?__biz=MzU4NzA3MTc5Mg==&mid=2247484323&idx=1&sn=c3306b3f9abb6f880e2672f169202a42&chksm=fdf0ebfcca8762eaf9b4873e79cd3445857b1f4476a854acdf9c19fb81e1a02146c65cff5078&token=610975656&lang=zh_CN&scene=21#wechat_redirect)
- [【对线面试官】Kafka基础](https://mp.weixin.qq.com/s?__biz=MzU4NzA3MTc5Mg==&mid=2247484387&idx=1&sn=5bb2ba58776e65f53b091a4bcdb73755&chksm=fdf0ebbcca8762aadc359066ecd70274fa23ee846f9ba9114017402dcbed415f25f97d3020a6&token=1131755397&lang=zh_CN&scene=21#wechat_redirect)
- [【对线面试官】使用Kafka会考虑什么问题？](https://mp.weixin.qq.com/s?__biz=MzU4NzA3MTc5Mg==&mid=2247484411&idx=1&sn=9c4aaeb44f4d9e09cc796805ada29921&chksm=fdf0eba4ca8762b234c3f101bb88c5d134554a831cbf4e80b08dc0bfa829e363a4e1e49a8b50&token=649285067&lang=zh_CN&scene=21#wechat_redirect)
- [【对线面试官】MySQL索引](https://mp.weixin.qq.com/s?__biz=MzU4NzA3MTc5Mg==&mid=2247484431&idx=1&sn=17b9e88233282469481e214a0cd2dc56&chksm=fdf0ec50ca8765460a20af19101855c859a6350a8dfd6680e7f47c2e73f03de48288184a1bf3&token=310857929&lang=zh_CN&scene=21#wechat_redirect)
- [【对线面试官】MySQL 事务&&锁机制&&MVCC](https://mp.weixin.qq.com/s?__biz=MzU4NzA3MTc5Mg==&mid=2247484480&idx=1&sn=3571b89575e8c37c114c9f290b953a1c&chksm=fdf0ec1fca87650913e6673a453d0ba1614341433aa67dd9977fef7231a3d825f7da4e4a132a&token=1651214636&lang=zh_CN&scene=21#wechat_redirect)

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/E44aHibktsKaOq9D32PYve9pGibicIibescAnCoKdEjGVJwKDR8utEKBOzGujZP77uxra9y3hlwQGe2qB4nSCDtuJg/640)

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/E44aHibktsKaOq9D32PYve9pGibicIibescAFm9UCWOvVch3VZ9S5XQvytR2XcTI5VVT3S1vgZNnm3eKt4aMll6bxA/640)



![图片](https://mmbiz.qpic.cn/mmbiz_jpg/E44aHibktsKaOq9D32PYve9pGibicIibescA9lnysY6LXKic1mKvVn5ZTME6RBicR8gUjZthF8pI35NYXj57nMib19t4Q/640)



![图片](https://mmbiz.qpic.cn/mmbiz_jpg/E44aHibktsKaOq9D32PYve9pGibicIibescAhvCczvODbY2jRVQpxrE4Gp0wvPLYYDVJIhUFxlvwKSf3LxKfmajsYQ/640)



![图片](https://mmbiz.qpic.cn/mmbiz_jpg/E44aHibktsKaOq9D32PYve9pGibicIibescAyrlich0Z8uiaVHKwlEx5mOMIrSnrdIJZkNjYBZficGHLZUL4WoIcRqFtQ/640)



![图片](https://mmbiz.qpic.cn/mmbiz_jpg/E44aHibktsKaOq9D32PYve9pGibicIibescA5HcCOAkJiaKZH5dImwibPQrXZcxtHOhnMib7H1nwYYJcJQkkiayuSElQ1g/640)



![图片](https://mmbiz.qpic.cn/mmbiz_jpg/E44aHibktsKaOq9D32PYve9pGibicIibescAd94Wa4MpaeaJc3gUlTIE9AibuMicHaIxtCfntjRt2EupHZ6H33H0bicAw/640)



![图片](https://mmbiz.qpic.cn/mmbiz_jpg/E44aHibktsKaOq9D32PYve9pGibicIibescAggwmciawK1yozfbsefw2m7ulwzNGXy55CaJmB4cTcEvuBP1UpqsYswQ/640)



![图片](https://mmbiz.qpic.cn/mmbiz_jpg/E44aHibktsKaOq9D32PYve9pGibicIibescAe8CNnU3UW7muowmghKWibkxjgYAxEmWv6fqv53JbBWGCRhstqMhibEZQ/640)



![图片](https://mmbiz.qpic.cn/mmbiz_jpg/E44aHibktsKaOq9D32PYve9pGibicIibescAdxwdHn4ichclT1vIrzoH3VGvG94fDAfCcic3UmXbpYSzSVY2L01OB2sg/640)



![图片](https://mmbiz.qpic.cn/mmbiz_jpg/E44aHibktsKaOq9D32PYve9pGibicIibescAPvHQOqYufEdY1yZ448fqyNZUUnHrwJcGjszptEltcwZXM9aIoZ3KDw/640)



![图片](https://mmbiz.qpic.cn/mmbiz_jpg/E44aHibktsKaOq9D32PYve9pGibicIibescAxFumQa8j0Zria8fDqqMiazibTJHKAshlLnlNW7qiaTUvGpUJiaXUaDfR4Cg/640)



![图片](https://mmbiz.qpic.cn/mmbiz_jpg/E44aHibktsKaOq9D32PYve9pGibicIibescAEgrg3lE73gEYyP3pLwQlQicQS6R3QGFeeX2icUY2nrqYMxhQEXwr0p4A/640)



![图片](https://mmbiz.qpic.cn/mmbiz_jpg/E44aHibktsKaOq9D32PYve9pGibicIibescAMxEfcRcticzQM2I1Gkns2gCwqwd92AUYnlEdesyKUHydkqPibDbPvibVQ/640)

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/E44aHibktsKaOq9D32PYve9pGibicIibescAd8PPAFBOQYjxQDfMibgjiayLDZqj9CR8WT7gsOpqVGXiaKpYia0bmryr6A/640)

![图片](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/E44aHibktsKaOq9D32PYve9pGibicIibescAHBIDauolPOAkf5CbeEksCu2R0OVRafEyjeUEaEnaxJBwich6g3o0o8Q/640)

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/E44aHibktsKaOq9D32PYve9pGibicIibescAiayL0PdETs4hEBLjOz63HlJ72oCWevMRHNHziadAqWiaicb5D8UDISviaZQ/640)



总结下今天的知识点吧（**赞和转发是肯定要的，别想了，又不用钱**）![图片](https://mmbiz.qpic.cn/mmbiz_png/E44aHibktsKaOq9D32PYve9pGibicIibescAd36sibIXnIUibDO2Ydgp4HybNM9ico8IC8f8SAoXAA6u3CJ5B1Zqbe7yw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)：

- 数据库表存在一定数据量，就需要有对应的索引
- 发现慢查询时，检查是否走对索引，是否能用更好的索引进行优化查询速度，查看使用索引的姿势有没有问题
- 当索引解决不了慢查询时，一般由于业务表的数据量太大导致，利用空间换时间的思想（NOSQL、聚合、冗余...)
- 当读写性能均遇到瓶颈时，先考虑能否升级数据库架构即可解决问题，若不能则需要考虑分库分表
- 分库分表虽然能解决掉读写瓶颈，但同时会带来各种问题，需要提前调研解决方案和踩坑

**线上不是给你炫技的地方，安稳才是硬道理。能用简单的方式去解决，不要用复杂的方式。**

![面试造火箭](http://mmbiz.qpic.cn/mmbiz_png/E44aHibktsKbNnU5S5B6m5yVtNbmfEUsMmf4eqOBEsXzMILa9eAZvBR4mntYwkkp59nicicN1soBWsduGrxLFVzWQ/0?wx_fmt=png)